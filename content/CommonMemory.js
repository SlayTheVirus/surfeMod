function CommonMemory(){this.data={},this.exp={},this.prefix="_cm_",this.prefix_exp="_cmexp_";var e=this;chrome.storage.local.get(null,function(t){var r=Object.keys(t);for(var o in r)new RegExp(e.prefix).test(r[o])&&null!==t[r[o]]&&(e.data[r[o]]=t[r[o]]),new RegExp(e.prefix_exp).test(r[o])&&null!==t[r[o]]&&(e.exp[r[o]]=t[r[o]])}),chrome.storage.onChanged.addListener(function(t){var r=Object.keys(t);for(var o in r)new RegExp(e.prefix).test(r[o])&&(e.data[r[o]]=t[r[o]].newValue),new RegExp(e.prefix_exp).test(r[o])&&(e.exp[r[o]]=t[r[o]].newValue)})}CommonMemory.prototype.get=function(e){var t=[];e.constructor!==Array&&(e=[String(e)]);for(var r in e){var o=this.prefix+e[r],i=this.prefix_exp+e[r];void 0!==this.data[o]&&this.exp[i]>0&&this.exp[i]>(new Date).valueOf()?t.push(this.data[o]):t.push(null)}return t.length?1===t.length?t[0]:t:null},CommonMemory.prototype.set=function(e,t,r){var o={},i=(new Date).valueOf();o[this.prefix+e]=t,o[this.prefix_exp+e]=r?i+1e3*r:i+18e5,this.data[this.prefix+e]=t,this.exp[this.prefix_exp+e]=o[this.prefix_exp+e],chrome.storage.local.set(o)},CommonMemory.prototype.remove=function(e){e.constructor!==Array&&(e=[String(e)]);var t=[],r={};for(var o in e){var i=this.prefix+e[o],a=this.prefix_exp+e[o];r[i]=null,r[a]=null,t.push(i),t.push(a),delete this.data[i],delete this.exp[a]}chrome.storage.local.set(r),chrome.storage.local.remove(e)},CommonMemory.prototype.clear=function(){var e=this;chrome.storage.local.get(null,function(t){var r=Object.keys(t);for(var o in r){var i=r[o];(new RegExp(e.prefix).test(i)||new RegExp(e.prefix_exp).test(i))&&chrome.storage.local.remove(i)}})};